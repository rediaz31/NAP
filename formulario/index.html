<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Formulario NAP</title>
  <style>
    .recurso-row {
      display: flex;
      gap: 16px;
      align-items: flex-end;
      margin-bottom: 8px;
    }
    .recurso-row input {
      width: 140px;
      margin-top: 0;
    }
    .recurso-row label {
      margin-top: 0;
      font-weight: normal;
    }
    .beneficiario-row {
      display: flex;
      gap: 16px;
      align-items: flex-end;
      margin-bottom: 8px;
    }
    .beneficiario-row select, .beneficiario-row input[type="number"] {
      width: 140px;
      margin-top: 0;
    }
    .beneficiario-row label {
      margin-top: 0;
      font-weight: normal;
    }
    .enfoque-flex-row {
      display: flex;
      align-items: flex-start;
      gap: 24px;
    }
    body { font-family: Arial, sans-serif; margin: 20px; }
    label { display: block; margin-top: 10px; }
    select, input, textarea { margin-top: 5px; padding: 5px; width: 300px; }
    fieldset { margin-top: 15px; padding: 10px; }
    .hidden { display: none; }
    .enfoque-checkbox-group {
      border: 1px solid #b3b3b3;
      background: #f9f9f9;
      border-radius: 6px;
      padding: 15px 32px;
      margin-top: 15px;
      margin-bottom: 10px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.04);
      max-width: 650px;
      min-width: 350px;
    }
  </style>
  <script>
    function agregarRecurso() {
      const list = document.getElementById('recursos-list');
      const row = document.createElement('div');
      row.className = 'recurso-row';
      row.innerHTML = `
        <label>Costos:
          <input type="number" name="recurso_costo[]" min="0">
        </label>
        <label>Financiamiento:
          <input type="text" name="recurso_financiamiento[]">
        </label>
        <button type="button" onclick="eliminarRecurso(this)" style="margin-left:4px;">Eliminar</button>
      `;
      list.appendChild(row);
    }

    function eliminarRecurso(btn) {
      const row = btn.parentElement;
      row.parentElement.removeChild(row);
    }
    function agregarBeneficiario() {
      const list = document.getElementById('beneficiarios-list');
      const row = document.createElement('div');
      row.className = 'beneficiario-row';
      row.innerHTML = `
        <label>Género:
          <select name="beneficiario_genero[]">
            <option value="">Seleccione</option>
            <option value="Femenino">Femenino</option>
            <option value="Masculino">Masculino</option>
            <option value="Otro">Otro</option>
          </select>
        </label>
        <label>Etnia:
          <select name="beneficiario_etnia[]">
            <option value="">Seleccione</option>
            <option value="Indígena">Indígena</option>
            <option value="Afrodescendiente">Afrodescendiente</option>
            <option value="Mestizo">Mestizo</option>
            <option value="Otro">Otro</option>
          </select>
        </label>
        <label>Cantidad:
          <input type="number" name="beneficiario_cantidad[]" min="1">
        </label>
        <button type="button" onclick="eliminarBeneficiario(this)" style="margin-left:4px;">Eliminar</button>
      `;
      list.appendChild(row);
    }

    function eliminarBeneficiario(btn) {
      const row = btn.parentElement;
      row.parentElement.removeChild(row);
    }
    function agregarEntidadColaboradora() {
      const container = document.getElementById('entidades-colaboradoras-list');
      const input = document.createElement('input');
      input.type = 'text';
      input.name = 'entidades_colaboradoras[]';
      input.style.width = '260px';
      input.style.marginTop = '6px';
      container.appendChild(document.createElement('br'));
      container.appendChild(input);
    }
    function mostrarOpcionesTerritoriales() {
      const tipoNap = document.getElementById("tipoNap").value;
      const territorialDiv = document.getElementById("territorialOpciones");
      if (tipoNap === "Territorial") {
        territorialDiv.classList.remove("hidden");
      } else {
        territorialDiv.classList.add("hidden");
      }
    }

    function toggleEnfoqueEspecifico() {
      const si = document.getElementById('enfoque_si').checked;
      const opciones = document.getElementById('enfoque_opciones');
      if (si) {
        opciones.classList.remove('hidden');
      } else {
        opciones.classList.add('hidden');
        // Desmarcar todos los checkboxes
        const checks = opciones.querySelectorAll('input[type="checkbox"]');
        checks.forEach(c => c.checked = false);
      }
    }
  </script>
</head>
<body>
  <h1>Formulario NAP</h1>

  <h2>1. Datos Generales</h2>
  <label for="tipoNap">Tipo NAP:</label>
  <select id="tipoNap" name="tipoNap" onchange="mostrarOpcionesTerritoriales()">
    <option value="">Seleccione...</option>
    <option value="Sectorial">Sectorial</option>
    <option value="Territorial">Territorial</option>
    <option value="Otro">Otro</option>
  </select>

  <div id="territorialOpciones" class="hidden">
    <label for="tipoTerritorial">Seleccione tipo territorial:</label>
    <select id="tipoTerritorial" name="tipoTerritorial">
      <option value="">Seleccione...</option>
      <option value="Corregimiento">Corregimiento</option>
      <option value="Comarcal">Comarcal</option>
    </select>
  </div>

  <fieldset>
    <legend>Regente del NAP</legend>
    <label>Nombre Punto Focal:</label><input type="text"><br>
    <label>Correo:</label><input type="email"><br>
    <label>Teléfono:</label><input type="text"><br>
    <label>Institución:</label><input type="text"><br>
    <label>Entidades Colaboradoras:</label>
    <div id="entidades-colaboradoras-list">
      <input type="text" name="entidades_colaboradoras[]" style="width: 260px;">
    </div>
    <button type="button" onclick="agregarEntidadColaboradora()" style="margin-top:6px;">Agregar Entidad</button><br>
  </fieldset>

  <fieldset>
    <legend>Beneficiarios</legend>
    <div id="beneficiarios-list">
      <div class="beneficiario-row">
        <label>Género:
          <select name="beneficiario_genero[]">
            <option value="">Seleccione</option>
            <option value="Femenino">Femenino</option>
            <option value="Masculino">Masculino</option>
            <option value="Otro">Otro</option>
          </select>
        </label>
        <label>Etnia:
          <select name="beneficiario_etnia[]">
            <option value="">Seleccione</option>
            <option value="Indígena">Indígena</option>
            <option value="Afrodescendiente">Afrodescendiente</option>
            <option value="Mestizo">Mestizo</option>
            <option value="Otro">Otro</option>
          </select>
        </label>
        <label>Cantidad:
          <input type="number" name="beneficiario_cantidad[]" min="1">
        </label>
        <button type="button" onclick="eliminarBeneficiario(this)" style="margin-left:4px;">Eliminar</button>
      </div>
    </div>
    <button type="button" onclick="agregarBeneficiario()" style="margin-top:8px;">Agregar beneficiario</button>
  </fieldset>

  <h2>2. Acciones contempladas</h2>
  <input type="checkbox"> SBN<br>
  <input type="checkbox"> Otra acción<br>

  <h2>3. Indicadores</h2>
  <label><input type="radio" name="indicador"> Monitoreo</label><br>
  <label><input type="radio" name="indicador"> Evaluación</label><br>
  <label><input type="radio" name="indicador"> Ambos</label><br>

  <h2>4. Descripción del NAP</h2>
  <fieldset id="enfoque_fieldset">
    <legend>Enfoque específico (si territorial)</legend>
    <div class="enfoque-flex-row">
      <div style="margin-bottom: 8px; min-width: 90px;">
        <label style="margin-right: 15px;">
          <input type="radio" id="enfoque_si" name="enfoque" value="Si" onclick="toggleEnfoqueEspecifico()"> Sí
        </label>
        <label>
          <input type="radio" id="enfoque_no" name="enfoque" value="No" onclick="toggleEnfoqueEspecifico()"> No
        </label>
      </div>
      <div id="enfoque_opciones" class="enfoque-checkbox-group hidden">
        <label><input type="checkbox" name="enfoque_opcion" value="Adaptación"> Adaptación</label><br>
        <label><input type="checkbox" name="enfoque_opcion" value="Mitigación"> Mitigación</label><br>
        <label><input type="checkbox" name="enfoque_opcion" value="Género"> Género</label><br>
        <label><input type="checkbox" name="enfoque_opcion" value="Pueblos originarios"> Pueblos originarios</label><br>
        <label><input type="checkbox" name="enfoque_opcion" value="Otro"> Otro</label>
      </div>
    </div>
  </fieldset>
  
  <fieldset>
    <legend>Recursos</legend>
    <div id="recursos-list">
      <div class="recurso-row">
        <label>Costos:
          <input type="number" name="recurso_costo[]" min="0">
        </label>
        <label>Financiamiento:
          <input type="text" name="recurso_financiamiento[]">
        </label>
        <button type="button" onclick="eliminarRecurso(this)" style="margin-left:4px;">Eliminar</button>
      </div>
    </div>
    <button type="button" onclick="agregarRecurso()" style="margin-top:8px;">Agregar recurso</button>
  </fieldset>

  <h2>5. Carga de documento</h2>
  <input type="file"><br><br>

  <button type="submit">Enviar</button>
</body>
</html>
